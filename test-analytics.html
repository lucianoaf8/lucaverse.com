<!DOCTYPE html>
<html>
<head>
    <title>Analytics Test</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #1a1a1a; color: #fff; }
        .result { margin: 10px 0; padding: 10px; background: #2a2a2a; border-radius: 5px; }
        .label { color: #00ff00; font-weight: bold; }
        .value { color: #00ffff; }
        .error { color: #ff0000; }
    </style>
</head>
<body>
    <h1>Analytics Data Test</h1>
    <div id="results"></div>

    <script>
        const results = document.getElementById('results');

        function addResult(label, value, isError = false) {
            const div = document.createElement('div');
            div.className = 'result';
            div.innerHTML = `<span class="label">${label}:</span> <span class="${isError ? 'error' : 'value'}">${value}</span>`;
            results.appendChild(div);
        }

        // Test all the analytics APIs
        try {
            // Language detection
            addResult('navigator.language', navigator.language || 'UNDEFINED');
            addResult('navigator.userLanguage', navigator.userLanguage || 'UNDEFINED');
            addResult('localStorage i18nextLng', localStorage.getItem('i18nextLng') || 'NOT SET');

            // Timezone
            try {
                const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;
                addResult('Timezone (Intl)', tz || 'UNDEFINED');
            } catch (e) {
                addResult('Timezone (Intl)', 'ERROR: ' + e.message, true);
            }
            addResult('Timezone Offset', new Date().getTimezoneOffset());

            // Device detection
            addResult('User Agent', navigator.userAgent);
            const ua = navigator.userAgent || '';
            const isMobile = /Mobile|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(ua);
            const isTablet = /iPad|Android(?!.*Mobile)|Tablet/i.test(ua);
            const deviceType = isTablet ? 'tablet' : (isMobile ? 'mobile' : 'desktop');
            addResult('Detected Device Type', deviceType);

            // Screen info
            addResult('screen.width', screen.width || 'UNDEFINED');
            addResult('screen.height', screen.height || 'UNDEFINED');
            addResult('window.innerWidth', window.innerWidth || 'UNDEFINED');
            addResult('window.innerHeight', window.innerHeight || 'UNDEFINED');

            // Connection
            if (navigator.connection) {
                addResult('navigator.connection.effectiveType', navigator.connection.effectiveType || 'UNDEFINED');
                addResult('navigator.connection.type', navigator.connection.type || 'UNDEFINED');
            } else {
                addResult('navigator.connection', 'NOT AVAILABLE', true);
            }

            // Other tech info
            addResult('Touch Support', 'ontouchstart' in window || navigator.maxTouchPoints > 0);
            addResult('navigator.maxTouchPoints', navigator.maxTouchPoints || '0');
            addResult('navigator.cookieEnabled', navigator.cookieEnabled);
            addResult('screen.colorDepth', screen.colorDepth || 'UNDEFINED');
            addResult('window.devicePixelRatio', window.devicePixelRatio || 'UNDEFINED');

            // Document info
            addResult('document.referrer', document.referrer || 'EMPTY');
            addResult('window.location.href', window.location.href);
            addResult('document.title', document.title);

        } catch (error) {
            addResult('Global Error', error.message, true);
        }
    </script>
</body>
</html>